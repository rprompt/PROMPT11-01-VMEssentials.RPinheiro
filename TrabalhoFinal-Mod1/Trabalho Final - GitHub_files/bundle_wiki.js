(function(a){var h={_PLACEHOLDERS:[],_p:function(g){this.fieldObject=g;this.placeholderText=g.val();var d=g.val();g.addClass("ph");g.blur(function(){if(a(this).val()==""){a(this).val(d);a(this).addClass("ph")}});g.focus(function(){a(this).removeClass("ph");a(this).val()==d?a(this).val(""):a(this)[0].select()})},add:function(g){h._PLACEHOLDERS.push(new h._p(g))},clearAll:function(){for(var g=0;g<h._PLACEHOLDERS.length;g++)h._PLACEHOLDERS[g].fieldObject.val()==h._PLACEHOLDERS[g].placeholderText&&h._PLACEHOLDERS[g].fieldObject.val("")},
exists:function(){return _PLACEHOLDERS.length}};a.GollumPlaceholder=h})(jQuery);(function(a){var h={debugOn:false,markupCreated:false,markup:"",attachEvents:function(d){a("#gollum-dialog-action-ok").click(function(e){g("evtOK triggered");h.eventOK(e,d)});a("#gollum-dialog-action-cancel").click(h.eventCancel);a('#gollum-dialog-dialog input[type="text"]').keydown(function(e){e.keyCode==13&&h.eventOK(e,d)})},detachEvents:function(){a("#gollum-dialog-action-ok").unbind("click");a("#gollum-dialog-action-cancel").unbind("click")},createFieldMarkup:function(d){for(var e="<fieldset>",
k=0;k<d.length;k++)if(typeof d[k]=="object"){e+='<div class="field">';switch(d[k].type){case "text":e+=h.createFieldText(d[k]);break;default:break}e+="</div>"}e+="</fieldset>";return e},createFieldText:function(d){var e="";if(d.name){e+="<label";if(d.id)e+=' for="'+d.name+'"';e+=">"+d.name+"</label>"}e+='<input type="text"';if(d.id){e+=' name="'+d.id+'"';if(d.type=="code")e+=' class="code"';e+=' id="gollum-dialog-dialog-generated-field-'+d.id+'">'}return e},createMarkup:function(d,e){h.markupCreated=
true;g("creating markup");return'<div id="gollum-dialog-dialog"><div id="gollum-dialog-dialog-title"><h4>'+d+'</h4></div><div id="gollum-dialog-dialog-body">'+e+'</div><div id="gollum-dialog-dialog-buttons"><a href="#" title="Cancel" id="gollum-dialog-action-cancel" class="gollum-minibutton">Cancel</a><a href="#" title="OK" id="gollum-dialog-action-ok" class="gollum-minibutton">OK</a></div></div>'},eventCancel:function(d){d.preventDefault();g("Cancelled dialog.");h.hide()},eventOK:function(d,e){d.preventDefault();
var k=[];a("#gollum-dialog-dialog-body input").each(function(){k[a(this).attr("name")]=a(this).val()});e&&typeof e=="function"&&e(k);h.hide()},hide:function(){h.markupCreated=false;a(document).trigger("close.facebox");h.detachEvents()},init:function(d){var e="",k="";if(!d||typeof d!="object")g("Editor Dialog: Cannot init; invalid init object");else{if(d.body&&typeof d.body=="string")k="<p>"+d.body+"</p>";if(d.fields&&typeof d.fields=="object")k+=h.createFieldMarkup(d.fields);if(d.title&&typeof d.title==
"string")e=d.title;h.markupCreated&&a(document).trigger("close.facebox");h.markup=h.createMarkup(e,k);a(document).bind("reveal.facebox",function(){if(d.OK&&typeof d.OK=="function"){h.attachEvents(d.OK);a(a('#facebox input[type="text"]').get(0)).focus()}});h.show()}},show:function(){if(h.markupCreated){g("Showing dialog");a.facebox(h.markup)}else g("Dialog: No markup to show. Please use init first.")}};function g(d){h.debugOn&&typeof console!="undefined"&&console.log(d)}a(document).bind("reveal.facebox",
function(){a("#facebox img.close_image").remove()});a.GollumDialog=h})(jQuery);(function(a){var h={MarkupType:"markdown",EditorMode:"code",NewFile:false,HasFunctionBar:true,Debug:false,NoDefinitionsFor:["mediawiki","org"]},g={};a.GollumEditor=function(b){g=a.extend(h,b);d("GollumEditor loading");if(k.baseEditorMarkup()){k.titleDisplayed()&&a("#gollum-editor-title-field").addClass("active");if(k.editSummaryMarkup()){a.GollumEditor.Placeholder.add(a("#gollum-editor-edit-summary input"));a('#gollum-editor form[name="gollum-editor"]').submit(function(c){c.preventDefault();a.GollumEditor.Placeholder.clearAll();
d("submitting");a(this).unbind("submit");a(this).submit()})}k.collapsibleInputs()&&a("#gollum-editor .collapsed a.button, #gollum-editor .expanded a.button").click(function(c){c.preventDefault();a(this).parent().toggleClass("expanded");a(this).parent().toggleClass("collapsed")});k.previewButton()&&a("#gollum-editor #gollum-editor-preview").click(function(){var c=a("#gollum-editor form").attr("action"),f=a(a("#gollum-editor form").get(0));f.attr("action",this.href);f.attr("target","_blank");f.submit();
f.attr("action",c);f.removeAttr("target");return false});if(k.functionBar()){if(b=a("#gollum-editor-body").attr("data-markup-lang"))g.MarkupType=b;e.setActiveLanguage(g.MarkupType);k.formatSelector()&&o.init(a("#gollum-editor-format-selector select"));if(k.help()){a("#gollum-editor-help").hide();a("#gollum-editor-help").removeClass("jaws")}}}};a.GollumEditor.defineLanguage=function(b,c){typeof c=="object"?e.define(b,c):d("GollumEditor.defineLanguage: definition for "+b+" is not an object")};function d(b){g.Debug&&
typeof console!="undefined"&&console.log(b)}var e={_ACTIVE_LANG:"",_LOADED_LANGS:[],_LANG:{},define:function(b,c){e._ACTIVE_LANG=b;e._LOADED_LANGS.push(b);if(typeof a.GollumEditor.WikiLanguage=="object"){var f={};a.extend(f,a.GollumEditor.WikiLanguage,c);e._LANG[b]=f}else e._LANG[b]=c},getActiveLanguage:function(){return e._ACTIVE_LANG},setActiveLanguage:function(b){if(e.isLoadedFor(b)){e._ACTIVE_LANG=b;n.refresh()}else{e._ACTIVE_LANG=null;e.loadFor(b,function(c,f){if(f!="success"){d("Failed to load language definition for "+
b);e.define(b,{})}k.functionBar()&&n.refresh();e.isValid()&&k.formatSelector()&&o.updateSelected()})}},getDefinitionFor:function(b,c){if(!c)c=e._ACTIVE_LANG;if(e.isLoadedFor(c)&&e._LANG[c][b]&&typeof e._LANG[c][b]=="object")return e._LANG[c][b];return null},loadFor:function(b,c){if(g.NoDefinitionsFor.length)for(var f=0;f<g.NoDefinitionsFor.length;f++)if(b==g.NoDefinitionsFor[f])if(typeof c=="function"){c(null,"error");return}b="/javascripts/editor/langs/"+b+".js";a.ajax({url:b,dataType:"script",complete:function(j,
l){typeof c=="function"&&c(j,l)}})},isLoadedFor:function(b){if(e._LOADED_LANGS.length===0)return false;for(var c=0;c<e._LOADED_LANGS.length;c++)if(e._LOADED_LANGS[c]==b)return true;return false},isValid:function(){return e._ACTIVE_LANG&&typeof e._LANG[e._ACTIVE_LANG]=="object"}},k={baseEditorMarkup:function(){return a("#gollum-editor").length&&a("#gollum-editor-body").length},collapsibleInputs:function(){return a("#gollum-editor .collapsed, #gollum-editor .expanded").length},formatSelector:function(){return a("#gollum-editor-format-selector select").length},
functionBar:function(){return g.HasFunctionBar&&a("#gollum-editor-function-bar").length},ff4Environment:function(){var b=new RegExp(/Firefox\/4.0b/);return b.test(navigator.userAgent)},editSummaryMarkup:function(){return a("input#gollum-editor-message-field").length>0},help:function(){return a("#gollum-editor #gollum-editor-help").length&&a("#gollum-editor #function-help").length},mathJax:function(){return typeof window.MathJax=="object"},previewButton:function(){return a("#gollum-editor #gollum-editor-preview").length},
titleDisplayed:function(){return g.NewFile}},n={isActive:false,activate:function(){d("Activating function bar");a("#gollum-editor-function-bar a.function-button").each(function(){if(e.getDefinitionFor(a(this).attr("id"))){a(this).click(n.evtFunctionButtonClick);a(this).removeClass("disabled")}else a(this).attr("id")!="function-help"&&a(this).addClass("disabled")});a("#gollum-editor-function-bar").addClass("active");n.isActive=true},deactivate:function(){a("#gollum-editor-function-bar a.function-button").unbind("click");
a("#gollum-editor-function-bar").removeClass("active");n.isActive=false},evtFunctionButtonClick:function(b){b.preventDefault();b=e.getDefinitionFor(a(this).attr("id"));typeof b=="object"&&n.executeAction(b)},executeAction:function(b){var c=a("#gollum-editor-body").val();n.getFieldSelectionPosition(a("#gollum-editor-body"));var f=n.getFieldSelection(a("#gollum-editor-body")),j=f,l=true,m=null;if(b.exec&&typeof b.exec=="function")b.exec(c,f,a("#gollum-editor-body"));else{c=/([^\n]+)/gi;if(b.search&&
typeof b.search=="object"){d("Replacing search Regex");c=new RegExp(b.search);d(c)}d('repText is "'+j+'"');if(b.replace&&typeof b.replace=="string"){d("Running replacement - using "+b.replace);var p=b.replace;j=j.replace(c,p);j=j.replace(/\$[\d]/g,"");if(j===""){d("Search string is empty");m=p.indexOf("$1");j=p.replace(/\$[\d]/g,"");if(m==-1)m=Math.floor(p.length/2)}}if(b.append&&typeof b.append=="string"){if(j==f)l=false;j+=b.append}j&&n.replaceFieldSelection(a("#gollum-editor-body"),j,l,m)}},getFieldSelectionPosition:function(b){if(b.length){var c=
0,f=0;b=b.get(0);if(typeof b.selectionStart=="number"&&typeof b.selectionEnd=="number"){c=b.selectionStart;f=b.selectionEnd}else{f=document.selection.createRange();c=f.duplicate();c.moveToElementText(b);c.setEndPoint("EndToEnd",f);c=c.text.length-f.text.length;f=c+f.text.length;var j=c,l=0,m;d("IE: start position is currently "+j);for(m=0;m<j;m++)b.value.charAt(m).match(/\r/)&&++l;if(l){d("IE start: compensating for "+l+" line breaks");c-=l;l=0}j=f;for(m=0;m<j;m++)b.value.charAt(m).match(/\r/)&&++l;
if(l){d("IE end: compensating for "+l+" line breaks");f-=l}}return{start:c,end:f}}},getFieldSelection:function(b){var c="",f;if(b.length){f=n.getFieldSelectionPosition(b);c=b.val().substring(f.start,f.end);d("Selected: "+c+" ("+f.start+", "+f.end+")");return c}return false},isShown:function(){return a("#gollum-editor-function-bar").is(":visible")},refresh:function(){if(k.functionBar()){d("Refreshing function bar");if(e.isValid()){a("#gollum-editor-function-bar a.function-button").unbind("click");
n.activate();i&&i.setActiveHelp(e.getActiveLanguage())}else{d("Language definition is invalid.");n.isShown()&&n.deactivate();i.isShown()&&i.hide()}}},replaceFieldSelection:function(b,c,f,j){var l=n.getFieldSelectionPosition(b),m=b.val(),p=true;if(f===false)p=false;f=null;if(b[0].scrollTop)f=b[0].scrollTop;b.val(m.substring(0,l.start)+c+m.substring(l.end));b[0].focus();if(p)if(b[0].setSelectionRange)j?b[0].setSelectionRange(l.start+j,l.start+j):b[0].setSelectionRange(l.start,l.start+c.length);else if(b[0].createTextRange){m=
b[0].createTextRange();m.collapse(true);if(j){m.moveEnd(l.start+j);m.moveStart(l.start+j)}else{m.moveEnd("character",l.start+c.length);m.moveStart("character",l.start)}m.select()}if(f)b[0].scrollTop=f}},o={$_SELECTOR:null,evtChangeFormat:function(){var b=a(this).val();e.setActiveLanguage(b)},init:function(b){d("Initializing format selector");o.$_SELECTOR&&typeof o.$_SELECTOR=="object"&&o.$_SELECTOR.unbind("change");o.$_SELECTOR=b;o.updateSelected();o.$_SELECTOR.change(o.evtChangeFormat)},updateSelected:function(){var b=
e.getActiveLanguage();o.$_SELECTOR.val(b)}},i={_ACTIVE_HELP:"",_LOADED_HELP_LANGS:[],_HELP:{},define:function(b,c){if(i.isValidHelpFormat(c)){d("help is a valid format");i._ACTIVE_HELP_LANG=b;i._LOADED_HELP_LANGS.push(b);i._HELP[b]=c;if(a("#function-help").length){a("#function-help").hasClass("disabled")&&a("#function-help").removeClass("disabled");a("#function-help").unbind("click");a("#function-help").click(i.evtHelpButtonClick);i.generateHelpMenuFor(b);a("#gollum-editor-help").length&&typeof a("#gollum-editor-help").attr("data-autodisplay")!==
"undefined"&&a("#gollum-editor-help").attr("data-autodisplay")==="true"&&i.show()}}else a("#function-help").length&&a("#function-help").addClass("disabled")},generateHelpMenuFor:function(b){if(!i._HELP[b]){d("Help is not defined for "+b.toString());return false}b=i._HELP[b];k.mathJax()&&i.isLoadedFor("mathjax")&&d("Adding MathJax support to help");a("#gollum-editor-help-parent").html("");a("#gollum-editor-help-list").html("");a("#gollum-editor-help-content").html("");for(var c=0;c<b.length;c++){if(typeof b[c]!=
"object")break;var f=a('<li><a href="#" rel="'+c+'">'+b[c].menuName+"</a></li>");a("#gollum-editor-help-parent").append(f);c===0&&f.children("a").addClass("selected");f.children("a").click(i.evtParentMenuClick)}i.generateSubMenu(b[0],0);a(a("#gollum-editor-help-list li a").get(0)).click()},generateSubMenu:function(b,c){a("#gollum-editor-help-list").html("");a("#gollum-editor-help-content").html("");for(var f=0;f<b.content.length;f++){if(typeof b.content[f]!="object")break;var j=a('<li><a href="#" rel="'+
c+":"+f+'">'+b.content[f].menuName+"</a></li>");a("#gollum-editor-help-list").append(j);j.children("a").click(i.evtSubMenuClick)}},hide:function(){a.browser.msie?a("#gollum-editor-help").css("display","none"):a("#gollum-editor-help").animate({opacity:0},200,function(){a("#gollum-editor-help").animate({height:"hide"},200)})},show:function(){a.browser.msie?a("#gollum-editor-help").css("display","block"):a("#gollum-editor-help").animate({height:"show"},200,function(){a("#gollum-editor-help").animate({opacity:1},
300)})},showHelpFor:function(b,c){b=i._HELP[i._ACTIVE_HELP_LANG][b].content[c].data;a("#gollum-editor-help-content").html(b)},isLoadedFor:function(b){for(var c=0;c<i._LOADED_HELP_LANGS.length;c++)if(b==i._LOADED_HELP_LANGS[c])return true;return false},isShown:function(){return a("#gollum-editor-help").is(":visible")},isValidHelpFormat:function(b){return typeof b=="object"&&b.length&&typeof b[0].menuName=="string"&&typeof b[0].content=="object"&&b[0].content.length},setActiveHelp:function(b){if(i.isLoadedFor(b)){i._ACTIVE_HELP_LANG=
b;if(a("#function-help").length){a("#function-help").hasClass("disabled")&&a("#function-help").removeClass("disabled");a("#function-help").unbind("click");a("#function-help").click(i.evtHelpButtonClick);i.generateHelpMenuFor(b)}}else{a("#function-help").length&&a("#function-help").addClass("disabled");i.isShown()&&i.hide()}},evtHelpButtonClick:function(b){b.preventDefault();if(i.isShown()){if(a("#gollum-editor-help").length&&a("#gollum-editor-help").attr("data-autodisplay")!=="undefined"&&a("#gollum-editor-help").attr("data-autodisplay")===
"true"){a.post("/wiki/help?_method=delete");a("#gollum-editor-help").attr("data-autodisplay","")}i.hide()}else i.show()},evtParentMenuClick:function(b){b.preventDefault();if(!a(this).hasClass("selected")){b=a(this).attr("rel");var c=i._HELP[i._ACTIVE_HELP_LANG][b];a("#gollum-editor-help-parent li a").removeClass("selected");a(this).addClass("selected");i.generateSubMenu(c,b);a(a("#gollum-editor-help-list li a").get(0)).click()}},evtSubMenuClick:function(b){b.preventDefault();if(!a(this).hasClass("selected")){b=
a(this).attr("rel").split(":");a("#gollum-editor-help-list li a").removeClass("selected");a(this).addClass("selected");i.showHelpFor(b[0],b[1])}}};a.GollumEditor.WikiLanguage={"function-internal-link":{exec:function(){a.GollumDialog.init({title:"Insert Wiki Link",fields:[{id:"name",name:"Link Name",type:"text"}],OK:function(b){var c="";if(b.name)c="[["+b.name+"]]";a.GollumEditor.replaceSelection(c)}})}}};a.GollumEditor.defineHelp=i.define;a.GollumEditor.Dialog=a.GollumDialog;a.GollumEditor.replaceSelection=
function(b){n.replaceFieldSelection(a("#gollum-editor-body"),b)};a.GollumEditor.Placeholder=a.GollumPlaceholder})(jQuery);$(document).ready(function(){if($.browser.mozilla)$("body").addClass("ff");else if($.browser.webkit)$("body").addClass("webkit");else if($.browser.msie){$("body").addClass("ie");if($.browser.version=="7.0")$("body").addClass("ie7");else $.browser.version=="8.0"&&$("body").addClass("ie8")}if(navigator.platform)if(navigator.platform.search("Win")!=-1)$("body").addClass("windows");else if(navigator.platform.search("Mac")!=-1)$("body").addClass("osx");else navigator.platform.search("Linux")!=-1&&$("body").addClass("linux");
if($("#minibutton-new-page").length){$("#minibutton-new-page").removeClass("jaws");$("#minibutton-new-page").click(function(a){a.preventDefault();$.GollumDialog.init({title:"Create New Page",fields:[{id:"name",name:"Page Name",type:"text"}],OK:function(h){var g="New Page";if(h.name)g=h.name;g=encodeURIComponent(g);window.location="/"+GitHub.nameWithOwner+"/wiki/_new?wiki[name]="+g}})})}if($("#wiki-wrapper").hasClass("history")){$("#wiki-history td.checkbox input").each(function(){$(this).click(highlightChecked);
$(this).is(":checked")&&nodeSelector.checkNode($(this))});$(".history a.action-compare-revision").length&&$(".history a.action-compare-revision").click(function(){$("#version-form").submit()})}$("#gollum-revert-form").length&&$(".gollum-revert-button").length&&$("a.gollum-revert-button").click(function(a){a.preventDefault();$("#gollum-revert-form").submit()})});
var nodeSelector={node1:null,node2:null,selectNodeRange:function(){if(nodeSelector.node1&&nodeSelector.node2){$("#wiki-history td.selected").removeClass("selected");nodeSelector.node1.addClass("selected");nodeSelector.node2.addClass("selected");if(nodeSelector.nodeComesAfter(nodeSelector.node1,nodeSelector.node2)){var a=nodeSelector.node1;nodeSelector.node1=nodeSelector.node2;nodeSelector.node2=a}for(a=nodeSelector.node1.next();a;){a.addClass("selected");if(a[0]==nodeSelector.node2[0])break;a=a.next()}}},
nodeComesAfter:function(a,h){var g=false;$(a).prevAll().each(function(){if($(this)[0]==$(h)[0])g=true});return g},checkNode:function(a){var h=a;a=$(a).parent().parent();if(h.is(":checked"))if(nodeSelector.node1)if(nodeSelector.node2)h[0].checked=false;else{nodeSelector.node2=a;nodeSelector.node2.addClass("selected");nodeSelector.selectNodeRange(nodeSelector.node1,nodeSelector.node2)}else{nodeSelector.node1=a;nodeSelector.node1.addClass("selected")}else{$("#wiki-history tr.selected").each(function(){$(this).find("td.checkbox input").is(":checked")||
$(this).removeClass("selected")});if(a[0]==nodeSelector.node1[0]){nodeSelector.node1=null;if(nodeSelector.node2){nodeSelector.node1=nodeSelector.node2;nodeSelector.node2=null}}else if(a[0]==nodeSelector.node2[0])nodeSelector.node2=null}}};function highlightOn(){$(this).parent().parent().animate({backgroundColor:"#ffffea",duration:400})}
function highlightOff(){var a="#ebf2f6";if($(this).parent().parent().hasClass("alt-row"))a="#f3f7fa";$(this).parent().parent().animate({backgroundColor:a,duration:400})}function highlightChecked(){nodeSelector.checkNode($(this))}function initMathJax(){};
